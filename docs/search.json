[
  {
    "objectID": "contact.html",
    "href": "contact.html",
    "title": "Contact me",
    "section": "",
    "text": "Your email  Message"
  },
  {
    "objectID": "posts/resources/resources.html#introduction",
    "href": "posts/resources/resources.html#introduction",
    "title": "rresourrces",
    "section": "Introduction",
    "text": "Introduction\nThis is intended to be a constantly evolving list of R resources that I have found helpful, informative, and maybe even fun - or that I intend to check out or use in the future. If they‚Äôre of benefit to you in any way that is great. But truth be told, this is supposed to be of utility for myself, or at the very least a bit of documentation to see where my interest has been caught.\nI came across most of these resources on Mastodon via the creator or a reblogger. Others I picked up from the excellent R Weekly podcast. Yet more are recommendations from my colleagues, or treasures discovered during the bouts of frantic googling that is my job as a technical analyst."
  },
  {
    "objectID": "posts/resources/resources.html#pretty-pictures",
    "href": "posts/resources/resources.html#pretty-pictures",
    "title": "rresourrces",
    "section": "Pretty pictures",
    "text": "Pretty pictures\n\nData Imaginist\nWebsite of self-described ‚Äúclassic generative art weirdo‚Äù Thomas Lin Pedersen. Author of:\n\n{ggfx} - ‚Äúa (currently experimantal) package that allows the use of various filters and shaders on ggplot2 layers‚Äù\n{patchwork} - combine separate ggplots and raster images into the same graphic. I plan to use this with a plot of Twitter employee reviews, placing an image of Elon Musk above the point at which the review scores absolutely tank in late October 2022 \n\n\n\nART FROM CODE\nAmazing-looking workshop by the incredible artist, educator, and general boon to the R community, Danielle Navarro. Originally from rstudio::conf2022, this is an R generative art workshop. Beautifully presented materials. Working my way through as a total genart newb as of late Jan ‚Äô23. I hope to blog about my experience of going through the materials!"
  },
  {
    "objectID": "posts/resources/resources.html#geospatial",
    "href": "posts/resources/resources.html#geospatial",
    "title": "rresourrces",
    "section": "Geospatial",
    "text": "Geospatial\nI‚Äôve made one interactive map and it was mainly done with boilerplate code, so please forgive any imprecision in the wording below!\n\nOpen Geography Portal (ONS)\nI found the GB ward boundaries shapefile very useful for work recently. It contains not just the spatial data for drawing polygons on maps, but also fields like LAD codes/names, which can be used as join keys with other public datasets such as those on the DWP‚Äôs Stat-Xplore.\n\n\n{sf}\nThis seems to be one of the main geospatial data packages in R. Apparently it‚Äôs all about ‚Äúspatial data simplified‚Äù, which I guess is a play on the whole simple features thing. To be honest I could only get it working in the most absolutely simple scenario. I found the docs far, far too daunting for the speed I had to operate for work, and in the end it was (unsurprisingly) google and Stack Overflow that got me sorted. I‚Äôm a rank novice with geospatial stuff so my struggle is more a comment on my knowledge than the sf docs themselves.\nEdit 2022-02-07 I found this Medium post by Trafford Council‚Äôs Trafford Data Lab (GitHub profile) - who do some awesome work - about using the Open Geography Portal API. You can supply an API URL directly to sf::read_sf, which is slick, so I updated my example map below.\n\n\n{leaflet}\nLeaflet is an open-source JavaScript library for making interactive maps. And of course, there is an R binding, because people are wonderful üò≠. It was surprisingly straightforward once I had my spatial data in. Thankfully there are some excellent examples on the package site, and as I needed to make a choropleth (not that I knew it was called that) for a Shiny app, I just stole the example code and tweaked it for my own purposes!\n\nTotal Amount of Benefit per ward, City of Edinburgh (fictional data)\n\n\nCode\nmy_ward <- \"City of Edinburgh\"\n\nmy_ward_api_formatted <- paste0(\"'\", my_ward, \"'\")\n\napi_url <- URLencode(paste0(\n  \"https://services1.arcgis.com/ESMARspQHYMw9BZ9/arcgis/rest/services/Wards_December_2022_Boundaries_GB_BGC/FeatureServer/0/query?\", \n  \"where=LAD22NM=\",\n  my_ward_api_formatted,\n  \"&‚ÄògeometryPrecision=6‚Äô&outFields=*&outSR=4326&f=geojson\"\n))\n\nward_shp <- sf::read_sf(api_url)\n\n# Random numbers to represent a fictional benefit\nbenefit <- tibble::tibble(\n  WD22CD = dplyr::pull(dplyr::filter(ward_shp, LAD22NM == my_ward), WD22CD),\n  benefit_value = rnorm(length(WD22CD)) * 1000\n)\n\n# Ward-specific data for the map\nward <- dplyr::filter(ward_shp, LAD22NM == my_ward) |>\n  dplyr::left_join(benefit, by = \"WD22CD\")\n\n# Format helpers\npal <- leaflet::colorNumeric(\"Greens\", domain = ward$benefit_value)\nthousands <- scales::label_comma()\n\nlabels <- sprintf(\n  \"<strong>%s</strong><br/>%s\",\n  ward$WD22NM, thousands(ward$benefit_value)\n) |> lapply(htmltools::HTML)\n\n# Map time!\nleaflet::leaflet() |>\n  leaflet::addTiles() |>\n  leaflet::addPolygons(\n    data = ward,\n    fillColor = ~pal(benefit_value),\n    weight = 2,\n    opacity = 0.9,\n    color = \"white\",\n    dashArray = \"3\",\n    fillOpacity = 0.9,\n    highlightOptions = leaflet::highlightOptions(\n      weight = 3,\n      color = \"#666\",\n      dashArray = \"\",\n      fillOpacity = 0.9,\n      bringToFront = TRUE),\n    label = labels,\n    labelOptions = leaflet::labelOptions(\n      style = list(\"font-weight\" = \"normal\", padding = \"3px 8px\"),\n      textsize = \"15px\",\n      direction = \"auto\")\n  ) |>\n  leaflet::addLegend(\n    pal = pal,\n    values = ward$benefit_value,\n    opacity = 0.9,\n    title = NULL,\n    position = \"topleft\"\n  )"
  },
  {
    "objectID": "posts/resources/resources.html#teaching",
    "href": "posts/resources/resources.html#teaching",
    "title": "rresourrces",
    "section": "Teaching",
    "text": "Teaching\n\nTen quick tips for teaching with (participatory) live coding (online)\nA blog post by Yanina Bellini Saibene. I can‚Äôt help but wonder if the internal R trainings I delivered for analysts at Policy in Practice would have benefited from a fully-fledged participatory approach. A lot to learn from this compendium of well-presented tips based on collected and personal experience, plus guidelines from several organisations."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Jim Gardner",
    "section": "",
    "text": "I am a Technical Analyst at Policy in Practice. I mainly use  to smoothen our workflows, and deliver analytics projects for clients. In my personal time I love to boulder, garden at Leith Community Croft, and hang with my wife and friends!"
  },
  {
    "objectID": "index.html#experience",
    "href": "index.html#experience",
    "title": "Jim Gardner",
    "section": "Experience",
    "text": "Experience\n Technical Analyst\nPolicy in Practice\n\nSept 2021 - present\n\n Research Assistant\nIEB, University of Edinburgh\nSept 2016 - Aug 2021"
  },
  {
    "objectID": "index.html#education",
    "href": "index.html#education",
    "title": "Jim Gardner",
    "section": "Education",
    "text": "Education\n MSc Gastronomy (Distinction)\nQueen Margaret University\n\n2016 - 2017\n\n BSc Biological Sciences (1:1)\nHeriot-Watt University\n2012 - 2016"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "~ blog",
    "section": "",
    "text": "This is my personal blog. While I may showcase some of my professional work and learning, any opinions expressed are mine alone!\n\n\n\n\n\n\n   \n     \n     \n       Order By\n       Default\n         \n          Title\n        \n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Modified - Oldest\n        \n         \n          Modified - Newest\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\nPublishing content in Quarto using conditionals and if/else code flow\n\n\n5 min\n\n\n\nQuarto\n\n\nR\n\n\nknitr\n\n\n\nA selection of simple methods using the knitr engine and HTML output\n\n\n\nApr 24, 2023\n\n\n\n\n\n4/25/23, 2:11:46 PM\n\n\n\n\n\n\n\n\n\n\n\n\n\nrresourrces\n\n\n4 min\n\n\n\nresources\n\n\nR\n\n\n\nR resources I want to/have used\n\n\n\nJan 20, 2023\n\n\n\n\n\n4/24/23, 5:30:51 PM\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/quarto-code-conditionals/script.html",
    "href": "posts/quarto-code-conditionals/script.html",
    "title": "Publishing content in Quarto using conditionals and if/else code flow",
    "section": "",
    "text": "In this post I will describe some of the ways I‚Äôve found to conditionally include content in a Quarto-generate HTML document.\nI‚Äôm using RStudio and the knitr rendering engine. If you know of Jupyter solutions please let me know! I will happily link to them for the disappointed Pythonistas who have ended up on my blog ;)"
  },
  {
    "objectID": "posts/quarto-code-conditionals/script.html#the-include-shortcode",
    "href": "posts/quarto-code-conditionals/script.html#the-include-shortcode",
    "title": "Publishing content in Quarto using conditionals and if/else code flow",
    "section": "The {{< include >}} shortcode",
    "text": "The {{< include >}} shortcode\nThis isn‚Äôt conditional, but it is really useful.\nIf you have company marketing boilerplate, or headers that start all of your reports, a neat solution is to keep these in their own qmd file and bring them into any other qmd using the include shortcode.\nIn your report you would use the code below\n{{< include _content.qmd >}}\nThis is akin to manually copying and pasting in the contents of content.qmd prior to the report getting rendered.\nWe‚Äôll come back to the shortcode later."
  },
  {
    "objectID": "posts/quarto-code-conditionals/script.html#conditional-content",
    "href": "posts/quarto-code-conditionals/script.html#conditional-content",
    "title": "Publishing content in Quarto using conditionals and if/else code flow",
    "section": "Conditional content",
    "text": "Conditional content\nTo my mind this one unfairly hogs the ‚Äúconditional‚Äù title.\nThis is for when you have parts of a document that you only want rendered (or not) to a specific format, such as HTML, PDF, etc.\nIf you‚Äôre interested in this, here‚Äôs the Quarto guide."
  },
  {
    "objectID": "posts/quarto-code-conditionals/script.html#inline-code",
    "href": "posts/quarto-code-conditionals/script.html#inline-code",
    "title": "Publishing content in Quarto using conditionals and if/else code flow",
    "section": "Inline code",
    "text": "Inline code\nYou can conditionally execute inline code. If my_boolean is TRUE the example below results in a level 2 heading that says ‚ÄúPlots for mtcars‚Äù.\n## Plots `r if (params$my_boolean) \"for mtcars\" else \"for iris\"`"
  },
  {
    "objectID": "posts/quarto-code-conditionals/script.html#in-functions",
    "href": "posts/quarto-code-conditionals/script.html#in-functions",
    "title": "Publishing content in Quarto using conditionals and if/else code flow",
    "section": "In functions",
    "text": "In functions\nSometimes you just need a bit of perspective. Rather than something convoluted, do you just need to make a function with flow control of some kind?\nplotting_func <- function(dat, col1, col2) {\n  \n  if (params$my_boolean) {\n    \n    dat |>\n      ggplot2::ggplot() +\n      ggplot2::geom_point(ggplot2::aes({{ col1 }}, {{ col2 }}))\n    \n  } else {\n    \n    dat |>\n      ggplot2::ggplot() +\n      ggplot2::geom_boxplot(ggplot2::aes({{ col1 }}, {{ col2 }}))\n    \n  }\n  \n}\nOr if the content is amenable to it, something like this\nplotting_func <- function(dat, col1, col2) {\n  \n  dat |>\n    ggplot2::ggplot() +\n    if (params$my_boolean) {\n      ggplot2::geom_point(ggplot2::aes({{ col1 }}, {{ col2 }}))\n    } else {\n      ggplot2::geom_boxplot(ggplot2::aes({{ col1 }}, {{ col2 }}))\n    }\n  \n}\nYou could put the function into a code block. Or you could hide it away in a folder R/ and a script functions.R. That‚Äôs useful if you write long ugly functions like me (lol), but also if you have multiple functions. In this case, you could just source the functions silently along with library calls at the start of the Quarto doc.\n```{r}\n#| include: false\nlibrary(dplyr)\nlibrary(downloadthis)\nlibrary(reactable)\nsource(file.path(\"R\", \"functions.R\"))\n```\nIf your content is too complicated for flow control inside of a function, then just put the content into separate functions in functions.R, source them as above, and use flow control in the Quarto doc\n```{r}\nif (params$my_boolean) {\n  fancy_model_a(mtcars, wt, mpg) \n} else {\n  fancy_model_b(iris, Species, Sepal.Length)\n}\n```"
  },
  {
    "objectID": "posts/quarto-code-conditionals/script.html#knitrknit_child",
    "href": "posts/quarto-code-conditionals/script.html#knitrknit_child",
    "title": "Publishing content in Quarto using conditionals and if/else code flow",
    "section": "knitr::knit_child",
    "text": "knitr::knit_child\nSaving the best for last, because this one is really cool!\nRemember how I started with the {{< include >}} shortcode and said that it wasn‚Äôt conditional?\n{{< include _content.qmd >}}\nIf anyone knows how to (simply) use the shortcode in a conditional manner I‚Äôd love to hear about it. In the meantime I consider the conditional version of this is using knitr::knit_child.\nLet‚Äôs say I make interactive plots of my data using Observable code blocks and keep this code in a separate Quarto doc ojs-cells.qmd. The code can be added to the main Quarto doc under certain conditions, as dictated by a boolean param ojs_include in the YAML header\n```{r}\n#| output: asis\nif (params$ojs_include) { \n  \n  cat(sep = \"\\n\",\n      knitr::knit_child(quiet = TRUE,\n                        text = readr::read_file(\"ojs-cells.qmd\")\n      )\n  )\n  \n}\n```\nWhat‚Äôs happening here is\n\nreadr::read_file brings in ojs-cells.qmd as a string\ncat restores the line-by-line formatting and ‚Äòprints‚Äô the content\nThe output: asis chunk option means Quarto treats the content as raw markdown output\n\nWorth a mention - though not about conditionality - is this demo by Micka√´l Canouil. It shows how the knit_child method can be called in a for loop to create n code chunks, and therefore n outputs (like tables and plots). This is great when you don‚Äôt know how many plots there will be or even what they are called."
  }
]